## 软件需求分析文档

项目名称：菜单数据库构建

版本号：V1.0

发布日期：2025年4月24日

编制人：ky0ha

审核人：

# 1、项目概述

通过构建菜单数据库，可以将菜单进行录入，并按照类别随机挑选菜的内容，输出为 Excel 表格。

# 2、项目分析

## 2.1 数据库结构分析

### 2.1.1  数据库功能

根据项目内容分析，数据库需要如下功能：

* 数据库需要支持增删改查功能：厨师需要对菜品进行录入、修改、删除
* 数据库需要三个类别：
  * 口味：麻辣、清淡
  * 类型：热菜、凉菜
  * 荤素：荤菜、素菜
* 数据库需要根据内容随机查询，可以生成下列组合：
  * 周内：三荤三素，晚上两荤三素
  * 周末：全天两荤两素

### 2.1.2 数据库结构

根据功能可知，数据库并不复杂，所以没有必要分成多个数据表，单表就可以。虽然可以将随机选取放在数据库层面，但是放在后端会更方便。所以数据表的结构如下：

|              | 菜品编号     | 菜名   | 口味   | 类型   | 荤素   |
| ------------ | ------------ | ------ | ------ | ------ | ------ |
| 字段类型     | 自增长整数型 | 字符串 | 字符串 | 字符串 | 字符串 |
| 是否为主键   | 是主键       |        |        |        |        |
| 是否允许为空 | 不允许       | 不允许 | 不允许 | 不允许 | 不允许 |

为了保证数据安全性，需要对数据的更新进行记录，所以创建一个记录更新情况的表，保证里面的每一个菜品都能查到对应的添加的人和时间：

|              | 菜品编号 | 厨师编号 | 更新时间 |
| ------------ | -------- | -------- | -------- |
| 字段类型     | 整数型   | 整数型   | 时间类型 |
| 是否为主键   | 是主键   | 是主键   |          |
| 是否允许为空 | 不允许   | 不允许   | 允许     |

同时对每个更新人进行存储，避免出现在数据库记录之外的人修改数据库：

|              | 厨师编号     | 厨师名 | 记录时间 |
| ------------ | ------------ | ------ | -------- |
| 字段类型     | 自增长整数型 | 字符串 | 事件类型 |
| 是否为主键   | 是主键       |        |          |
| 是否允许为空 | 不允许       | 不允许 | 允许     |

### 2.1.3 数据库安全性分析

数据库通过上面的表结构，可以在后端层面确保安全性，通过后端，避免不在数据库记录中的人修改数据库内容。

## 2.2 后端需求分析

### 2.2.1 后端功能概述

后端需要可以从数据库获取信息，同时需要能获取当前日期，来判断是在周中还是周末，以便于随机出不同的菜品组合。这些随机之后的菜品组合需要放在一个 Excel 表当中，进行输出。输出频率为一周，即一次性生成一周的菜品组合。

夏天至少需要一个凉菜

### 2.2.2 后端功能分析

程序主体部分根据功能，可以做出如下设计：

* 输入部分
  * 从数据库进行信息数据的获取
* 算法部分（过程部分）
  * 根据数据库中获得的信息和当前时间，来随机选取菜品组合，菜品组合要求如下：
    * 周中：中午三荤三素，晚上两荤三素
    * 周末：全天两荤两素
  * 当前季节如果是夏天，则至少会有一个凉菜
  * 每次的菜至少需要两个麻辣，一个清淡
* 输出部分
  * 将菜品的组合输出为一个 Excel 表格

数据库的管理程序分析：

* 输入部分
  * 从一个图形化界面获取管理员的操作
* 算法部分（过程部分）
  * 获取账号和密码，用来进行身份验证
  * 管理员账号可以对数据库进行直接查询和修改
  * 厨师账号可以对数据库进行添加，和修改属于自己创建的条目
  * 厨师账号可以在管理程序中直接查看所有自己添加的数据
  * 任何和管理程序有关的操作都应该在后台进行日志记录
* 输出部分
  * 对数据库进行操作
  * 将操作输出为日志进行记录保存

# 3、技术分析

## 3.1 数据库

使用 sqlite3 更加方便，所以可以使用 sqlite3 数据库进行本地存储。

## 3.2 后端程序

使用 python 进行程序主体构建，同时涉及到如下模块：

* tkinter：用来制作图形化界面
* pandas：用于进行表格操作
* sqlite3：用于进行数据库操作
* logging：用于进行日志记录
* hashlib：用于进行密码加密和密码校验
